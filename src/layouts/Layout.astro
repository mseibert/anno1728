---
interface Props {
	title?: string;
	lang?: 'de' | 'en';
	description?: string;
}

const defaultDescription = {
	de: 'Anno 1728 – Denkmalgeschütztes Ferienhaus in Wiesbaden-Auringen. Historisches Fachwerk, modern ausgestattet.',
	en: 'Anno 1728 – Historic vacation home in Wiesbaden-Auringen. Half-timbered heritage, modern comfort.',
};

const { title = "Anno 1728", lang = 'de', description } = Astro.props;
const metaDescription = description || defaultDescription[lang];

const currentPath = Astro.url.pathname;
const isEnglish = lang === 'en';

// Generate the path for the other language
const getOtherLangPath = () => {
	if (isEnglish) {
		// Remove /en/ prefix to get German version
		return currentPath.replace(/^\/en/, '') || '/';
	} else {
		// Add /en/ prefix to get English version
		return '/en' + (currentPath === '/' ? '/' : currentPath);
	}
};

const otherLangPath = getOtherLangPath();

// Navigation labels
const nav = isEnglish ? {
	home: 'Home',
	vorderhaus: 'Main House',
	alterSpeicher: 'Old Granary',
	geschichte: 'History',
	ausfluege: 'Excursions',
	essen: 'Dining',
	buchungen: 'Bookings'
} : {
	home: 'Home',
	vorderhaus: 'Vorderhaus',
	alterSpeicher: 'Alter Speicher',
	geschichte: 'Geschichte',
	ausfluege: 'Ausflüge',
	essen: 'Essen',
	buchungen: 'Buchungen'
};

const basePath = isEnglish ? '/en' : '';
---

<!doctype html>
<html lang={lang}>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/png" href="/logo.png" />
		<meta name="generator" content={Astro.generator} />
		<meta name="description" content={metaDescription} />
		<!-- Open Graph -->
		<meta property="og:title" content={title} />
		<meta property="og:description" content={metaDescription} />
		<meta property="og:type" content="website" />
		<meta property="og:locale" content={isEnglish ? 'en_US' : 'de_DE'} />
		<meta property="og:site_name" content="Anno 1728" />
		<!-- hreflang -->
		<link rel="alternate" hreflang="de" href={`https://www.anno1728-ferienhaus-wiesbaden.de${isEnglish ? otherLangPath : currentPath}`} />
		<link rel="alternate" hreflang="en" href={`https://www.anno1728-ferienhaus-wiesbaden.de${isEnglish ? currentPath : otherLangPath}`} />
		<link rel="alternate" hreflang="x-default" href={`https://www.anno1728-ferienhaus-wiesbaden.de${isEnglish ? otherLangPath : currentPath}`} />
		<title>{title}</title>
	</head>
	<body>
		<header>
			<div class="header-inner">
				<div class="header-top">
					<div class="logo">
						<a href={basePath + '/'} class="logo-link">
							<img src="/logo.png" alt="Anno 1728 Logo" class="logo-image" />
							<span class="logo-text">
								<strong>Anno 1728</strong>
								<span class="tagline">{isEnglish ? 'Historic vacation home in Wiesbaden-Auringen' : 'Denkmalgeschütztes Ferienhaus in Wiesbaden-Auringen'}</span>
							</span>
						</a>
					</div>
					<div class="lang-switcher">
						<a href={otherLangPath} class="lang-btn" title={isEnglish ? 'Deutsch' : 'English'}>
							{isEnglish ? 'DE' : 'EN'}
						</a>
					</div>
				</div>
				<nav>
					<a href={basePath + '/'}>{nav.home}</a>
					<a href={basePath + '/vorderhaus/'}>{nav.vorderhaus}</a>
					<a href={basePath + '/alter-speicher/'}>{nav.alterSpeicher}</a>
					<a href={basePath + '/geschichte/'}>{nav.geschichte}</a>
					<a href={basePath + '/ausfluege/'}>{nav.ausfluege}</a>
					<a href={basePath + '/essen/'}>{nav.essen}</a>
					<a href={basePath + '/buchungen/'}>{nav.buchungen}</a>
				</nav>
			</div>
		</header>
		<main>
			<slot />
		</main>
		<footer>
			<p>Anno 1728 · {isEnglish ? 'Historic vacation home in Wiesbaden-Auringen' : 'Denkmalgeschütztes Ferienhaus in Wiesbaden-Auringen'}</p>
			<p>Familie Seibert · Tel: +49 160 6044181 · <a href="mailto:info@anno1728-ferienhaus-wiesbaden.de">info@anno1728-ferienhaus-wiesbaden.de</a></p>
			<p class="legal-links">
				<a href={basePath + '/impressum/'}>{isEnglish ? 'Legal Notice' : 'Impressum'}</a> · <a href={basePath + '/datenschutz/'}>{isEnglish ? 'Privacy Policy' : 'Datenschutz'}</a>
			</p>
		</footer>
	</body>
</html>

<style>
	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}

	body {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
		font-size: 16px;
		line-height: 1.6;
		color: #333;
		background: #fff;
		min-height: 100vh;
		display: flex;
		flex-direction: column;
	}

	/* Header */
	header {
		background: linear-gradient(135deg, #8B2332 0%, #6B1A26 100%);
		padding: 1.5rem 0;
	}

	.header-inner {
		max-width: 900px;
		margin: 0 auto;
		padding: 0 1.5rem;
	}

	.header-top {
		display: flex;
		justify-content: space-between;
		align-items: flex-start;
	}

	.lang-switcher {
		flex-shrink: 0;
	}

	.lang-btn {
		display: inline-block;
		background: rgba(255, 255, 255, 0.2);
		color: #fff;
		padding: 0.4rem 0.8rem;
		border-radius: 4px;
		text-decoration: none;
		font-size: 0.85rem;
		font-weight: 600;
		transition: background 0.2s;
	}

	.lang-btn:hover {
		background: rgba(255, 255, 255, 0.35);
	}

	.logo-link {
		display: flex;
		align-items: center;
		gap: 1rem;
		text-decoration: none;
		color: #fff;
	}

	.logo-image {
		width: 60px;
		height: 60px;
		object-fit: contain;
		border-radius: 4px;
	}

	.logo-text {
		display: flex;
		flex-direction: column;
	}

	.logo-text strong {
		font-size: 2rem;
		letter-spacing: 0.02em;
	}

	.tagline {
		font-size: 0.95rem;
		color: rgba(255, 255, 255, 0.85);
		margin-top: 0.2rem;
	}

	nav {
		margin-top: 1rem;
		display: flex;
		gap: 0.25rem;
		flex-wrap: wrap;
	}

	nav a {
		color: rgba(255, 255, 255, 0.9);
		text-decoration: none;
		padding: 0.5rem 1rem;
		border-radius: 3px;
		font-size: 0.95rem;
		transition: background 0.2s;
	}

	nav a:hover {
		background: rgba(255, 255, 255, 0.15);
		color: #fff;
	}

	/* Main */
	main {
		flex: 1;
		max-width: 900px;
		margin: 0 auto;
		padding: 2rem 1.5rem;
		width: 100%;
	}

	/* Footer */
	footer {
		border-top: 1px solid #e0e0e0;
		padding: 1.5rem;
		text-align: center;
		font-size: 0.85rem;
		color: #666;
		margin-top: auto;
	}

	footer p {
		margin-bottom: 0.25rem;
	}

	footer a[href^="mailto:"] {
		color: #8B2332;
		text-decoration: none;
	}

	footer a[href^="mailto:"]:hover {
		text-decoration: underline;
	}

	.legal-links {
		margin-top: 0.75rem;
	}

	.legal-links a {
		color: #8B2332;
		text-decoration: none;
	}

	.legal-links a:hover {
		text-decoration: underline;
	}

	/* Responsive */
	@media (max-width: 600px) {
		.logo-image {
			width: 45px;
			height: 45px;
		}

		.logo-text strong {
			font-size: 1.5rem;
		}

		.tagline {
			font-size: 0.8rem;
		}

		nav a {
			padding: 0.4rem 0.7rem;
			font-size: 0.9rem;
		}
	}
</style>
